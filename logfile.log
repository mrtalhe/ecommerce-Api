{"kind":"ObjectId","level":"error","message":"Cast to ObjectId failed for value \"node-s-course-updated\" (type string) at path \"_id\" for model \"Product\" Cast to ObjectId failed for value \"node-s-course-updated\" (type string) at path \"_id\" for model \"Product\"","path":"_id","reason":{},"stack":"CastError: Cast to ObjectId failed for value \"node-s-course-updated\" (type string) at path \"_id\" for model \"Product\"\n    at model.Query.exec (C:\\Users\\Markazi-108\\Desktop\\projects\\ecommerce-Api-main\\node_modules\\mongoose\\lib\\query.js:4933:21)\n    at module.exports.getSingleProduct (C:\\Users\\Markazi-108\\Desktop\\projects\\ecommerce-Api-main\\src\\routes\\product\\controller.js:63:8)\n    at Layer.handle [as handle_request] (C:\\Users\\Markazi-108\\Desktop\\projects\\ecommerce-Api-main\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Markazi-108\\Desktop\\projects\\ecommerce-Api-main\\node_modules\\express\\lib\\router\\route.js:137:13)\n    at Route.dispatch (C:\\Users\\Markazi-108\\Desktop\\projects\\ecommerce-Api-main\\node_modules\\express\\lib\\router\\route.js:112:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Markazi-108\\Desktop\\projects\\ecommerce-Api-main\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\Markazi-108\\Desktop\\projects\\ecommerce-Api-main\\node_modules\\express\\lib\\router\\index.js:281:22\n    at param (C:\\Users\\Markazi-108\\Desktop\\projects\\ecommerce-Api-main\\node_modules\\express\\lib\\router\\index.js:354:14)\n    at param (C:\\Users\\Markazi-108\\Desktop\\projects\\ecommerce-Api-main\\node_modules\\express\\lib\\router\\index.js:365:14)\n    at Function.process_params (C:\\Users\\Markazi-108\\Desktop\\projects\\ecommerce-Api-main\\node_modules\\express\\lib\\router\\index.js:410:3)","stringValue":"\"node-s-course-updated\"","value":"node-s-course-updated","valueType":"string"}
{"code":11000,"codeName":"DuplicateKey","keyPattern":{"title":1},"keyValue":{"title":"node Js course updated 2"},"level":"error","message":"Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: ecommerceApi.products index: title_1 dup key: { title: \"node Js course updated 2\" } Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: ecommerceApi.products index: title_1 dup key: { title: \"node Js course updated 2\" }","ok":0,"stack":"MongoServerError: Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: ecommerceApi.products index: title_1 dup key: { title: \"node Js course updated 2\" }\n    at Connection.onMessage (C:\\Users\\Markazi-108\\Desktop\\projects\\ecommerce-Api-main\\node_modules\\mongodb\\lib\\cmap\\connection.js:230:30)\n    at MessageStream.<anonymous> (C:\\Users\\Markazi-108\\Desktop\\projects\\ecommerce-Api-main\\node_modules\\mongodb\\lib\\cmap\\connection.js:61:60)\n    at MessageStream.emit (node:events:513:28)\n    at processIncomingData (C:\\Users\\Markazi-108\\Desktop\\projects\\ecommerce-Api-main\\node_modules\\mongodb\\lib\\cmap\\message_stream.js:125:16)\n    at MessageStream._write (C:\\Users\\Markazi-108\\Desktop\\projects\\ecommerce-Api-main\\node_modules\\mongodb\\lib\\cmap\\message_stream.js:33:9)\n    at writeOrBuffer (node:internal/streams/writable:392:12)\n    at _write (node:internal/streams/writable:333:10)\n    at Writable.write (node:internal/streams/writable:337:10)\n    at Socket.ondata (node:internal/streams/readable:766:22)\n    at Socket.emit (node:events:513:28)"}
{"code":11000,"codeName":"DuplicateKey","keyPattern":{"title":1},"keyValue":{"title":"node Js course updated 2"},"level":"error","message":"Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: ecommerceApi.products index: title_1 dup key: { title: \"node Js course updated 2\" } Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: ecommerceApi.products index: title_1 dup key: { title: \"node Js course updated 2\" }","ok":0,"stack":"MongoServerError: Plan executor error during findAndModify :: caused by :: E11000 duplicate key error collection: ecommerceApi.products index: title_1 dup key: { title: \"node Js course updated 2\" }\n    at Connection.onMessage (C:\\Users\\Markazi-108\\Desktop\\projects\\ecommerce-Api-main\\node_modules\\mongodb\\lib\\cmap\\connection.js:230:30)\n    at MessageStream.<anonymous> (C:\\Users\\Markazi-108\\Desktop\\projects\\ecommerce-Api-main\\node_modules\\mongodb\\lib\\cmap\\connection.js:61:60)\n    at MessageStream.emit (node:events:513:28)\n    at processIncomingData (C:\\Users\\Markazi-108\\Desktop\\projects\\ecommerce-Api-main\\node_modules\\mongodb\\lib\\cmap\\message_stream.js:125:16)\n    at MessageStream._write (C:\\Users\\Markazi-108\\Desktop\\projects\\ecommerce-Api-main\\node_modules\\mongodb\\lib\\cmap\\message_stream.js:33:9)\n    at writeOrBuffer (node:internal/streams/writable:392:12)\n    at _write (node:internal/streams/writable:333:10)\n    at Writable.write (node:internal/streams/writable:337:10)\n    at Socket.ondata (node:internal/streams/readable:766:22)\n    at Socket.emit (node:events:513:28)"}
{"code":"ERR_HTTP_HEADERS_SENT","level":"error","message":"Cannot set headers after they are sent to the client Cannot set headers after they are sent to the client","stack":"Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client\n    at new NodeError (node:internal/errors:399:5)\n    at ServerResponse.setHeader (node:_http_outgoing:645:11)\n    at ServerResponse.header (C:\\Users\\Markazi-108\\Desktop\\projects\\ecommerce-Api-main\\node_modules\\express\\lib\\response.js:771:10)\n    at ServerResponse.send (C:\\Users\\Markazi-108\\Desktop\\projects\\ecommerce-Api-main\\node_modules\\express\\lib\\response.js:170:12)\n    at ServerResponse.json (C:\\Users\\Markazi-108\\Desktop\\projects\\ecommerce-Api-main\\node_modules\\express\\lib\\response.js:267:15)\n    at module.exports.response (C:\\Users\\Markazi-108\\Desktop\\projects\\ecommerce-Api-main\\src\\routes\\controller.js:47:22)\n    at module.exports.getProductComments (C:\\Users\\Markazi-108\\Desktop\\projects\\ecommerce-Api-main\\src\\routes\\product\\controller.js:108:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
{"level":"error","message":"parent is not defined parent is not defined","stack":"ReferenceError: parent is not defined\n    at module.exports.getProductComments (C:\\Users\\Markazi-108\\Desktop\\projects\\ecommerce-Api-main\\src\\routes\\product\\controller.js:94:99)\n    at Layer.handle [as handle_request] (C:\\Users\\Markazi-108\\Desktop\\projects\\ecommerce-Api-main\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Markazi-108\\Desktop\\projects\\ecommerce-Api-main\\node_modules\\express\\lib\\router\\route.js:137:13)\n    at Route.dispatch (C:\\Users\\Markazi-108\\Desktop\\projects\\ecommerce-Api-main\\node_modules\\express\\lib\\router\\route.js:112:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Markazi-108\\Desktop\\projects\\ecommerce-Api-main\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\Markazi-108\\Desktop\\projects\\ecommerce-Api-main\\node_modules\\express\\lib\\router\\index.js:281:22\n    at param (C:\\Users\\Markazi-108\\Desktop\\projects\\ecommerce-Api-main\\node_modules\\express\\lib\\router\\index.js:354:14)\n    at param (C:\\Users\\Markazi-108\\Desktop\\projects\\ecommerce-Api-main\\node_modules\\express\\lib\\router\\index.js:365:14)\n    at Function.process_params (C:\\Users\\Markazi-108\\Desktop\\projects\\ecommerce-Api-main\\node_modules\\express\\lib\\router\\index.js:410:3)\n    at next (C:\\Users\\Markazi-108\\Desktop\\projects\\ecommerce-Api-main\\node_modules\\express\\lib\\router\\index.js:275:10)"}
{"level":"error","message":"Cannot read properties of null (reading 'save') Cannot read properties of null (reading 'save')","stack":"TypeError: Cannot read properties of null (reading 'save')\n    at module.exports.updateProduct (C:\\Users\\Markazi-108\\Desktop\\projects\\ecommerce-Api-main\\src\\routes\\admin\\product\\controller.js:115:18)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
{"level":"error","message":"Cannot read properties of null (reading 'save') Cannot read properties of null (reading 'save')","stack":"TypeError: Cannot read properties of null (reading 'save')\n    at module.exports.updateProduct (C:\\Users\\Markazi-108\\Desktop\\projects\\ecommerce-Api-main\\src\\routes\\admin\\product\\controller.js:115:18)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}
{"level":"error","message":"Invalid sort value: { price: 2 } Invalid sort value: { price: 2 }","stack":"TypeError: Invalid sort value: { price: 2 }\n    at push (C:\\Users\\Markazi-108\\Desktop\\projects\\ecommerce-Api-main\\node_modules\\mquery\\lib\\mquery.js:1322:19)\n    at Query.sort (C:\\Users\\Markazi-108\\Desktop\\projects\\ecommerce-Api-main\\node_modules\\mquery\\lib\\mquery.js:1279:7)\n    at Query.sort (C:\\Users\\Markazi-108\\Desktop\\projects\\ecommerce-Api-main\\node_modules\\mongoose\\lib\\query.js:3004:26)\n    at module.exports.getAllProducts (C:\\Users\\Markazi-108\\Desktop\\projects\\ecommerce-Api-main\\src\\routes\\admin\\product\\controller.js:32:82)\n    at Layer.handle [as handle_request] (C:\\Users\\Markazi-108\\Desktop\\projects\\ecommerce-Api-main\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Markazi-108\\Desktop\\projects\\ecommerce-Api-main\\node_modules\\express\\lib\\router\\route.js:137:13)\n    at Route.dispatch (C:\\Users\\Markazi-108\\Desktop\\projects\\ecommerce-Api-main\\node_modules\\express\\lib\\router\\route.js:112:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Markazi-108\\Desktop\\projects\\ecommerce-Api-main\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\Markazi-108\\Desktop\\projects\\ecommerce-Api-main\\node_modules\\express\\lib\\router\\index.js:281:22\n    at Function.process_params (C:\\Users\\Markazi-108\\Desktop\\projects\\ecommerce-Api-main\\node_modules\\express\\lib\\router\\index.js:335:12)"}
{"level":"error","message":"Invalid sort value: { price: 10000 } Invalid sort value: { price: 10000 }","stack":"TypeError: Invalid sort value: { price: 10000 }\n    at push (C:\\Users\\Markazi-108\\Desktop\\projects\\ecommerce-Api-main\\node_modules\\mquery\\lib\\mquery.js:1322:19)\n    at Query.sort (C:\\Users\\Markazi-108\\Desktop\\projects\\ecommerce-Api-main\\node_modules\\mquery\\lib\\mquery.js:1279:7)\n    at Query.sort (C:\\Users\\Markazi-108\\Desktop\\projects\\ecommerce-Api-main\\node_modules\\mongoose\\lib\\query.js:3004:26)\n    at module.exports.getAllProducts (C:\\Users\\Markazi-108\\Desktop\\projects\\ecommerce-Api-main\\src\\routes\\admin\\product\\controller.js:32:82)\n    at Layer.handle [as handle_request] (C:\\Users\\Markazi-108\\Desktop\\projects\\ecommerce-Api-main\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Markazi-108\\Desktop\\projects\\ecommerce-Api-main\\node_modules\\express\\lib\\router\\route.js:137:13)\n    at Route.dispatch (C:\\Users\\Markazi-108\\Desktop\\projects\\ecommerce-Api-main\\node_modules\\express\\lib\\router\\route.js:112:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Markazi-108\\Desktop\\projects\\ecommerce-Api-main\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\Markazi-108\\Desktop\\projects\\ecommerce-Api-main\\node_modules\\express\\lib\\router\\index.js:281:22\n    at Function.process_params (C:\\Users\\Markazi-108\\Desktop\\projects\\ecommerce-Api-main\\node_modules\\express\\lib\\router\\index.js:335:12)"}
